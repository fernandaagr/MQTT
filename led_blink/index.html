<!DOCTYPE html>
<html>
<head lang="pt-br">
	<meta charset="utf-8">
	<title>Teste MQTT</title>
</head>
<body>
	<h2 class="">Controlando LED com MQTT</h2>
    <div class="">
    	<input type="button" name="on" id = "on" value="Liga">
    	<input type="button" name="off" id="off" value="Desliga"> 
    </div>

    <script src="..\classes\mqttws31.js"></script>  
	<script src="..\classes\clientMQTT.js"></script>
	<script type="text/javascript">
		init();
	</script>
  	<script type="text/javascript">

  		function liga(){
  			client.subscribe("led/1");
			message = new Paho.MQTT.Message("1"); // Cria uma nova mensagem
			message.destinationName = "led/1"; // Define o tópico a ser enviado, neste caso: led/1
			client.send(message); // Envia a mensagem
			console.log("ligou");
		}
		function desliga(){
			client.subscribe("led/1");
			message = new Paho.MQTT.Message("0"); // Cria uma nova mensagem
			message.destinationName = "led/1"; // Define o tópico a ser enviado, neste caso: led/1
			client.send(message); // Envia a mensagem
			console.log("desligou");
		}
		var btliga = document.getElementById("on");
		//adiciona o evento click no botão 
		btliga.addEventListener("click", liga);
		var btdesliga = document.getElementById("off");
		btdesliga.addEventListener("click", desliga);
      		
      </script>
</body>
</html>
